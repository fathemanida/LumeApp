<!-- Google Fonts for Aboreto and Jost -->
<link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Jost:wght@400;500&display=swap" rel="stylesheet">

<nav class="navbar d-flex align-items-center justify-content-between px-3 py-3 w-100" style="position: relative; min-height: 70px;">
  <!-- Left side - Sidebar Toggle + Brand -->
  <div class="brand d-flex align-items-center gap-2">
    <button id="sidebarToggle" class="sidebar-toggle-btn" style="margin-right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer;">
      <i class="fas fa-bars"></i>
    </button>
    <a href="/" class="brand-text" style="font-family: 'Aboreto', cursive; font-size: 1.35rem; letter-spacing: 1.5px; text-transform: uppercase; color: #1a0f0a; font-weight: 400; text-decoration: none; line-height: 1.2; display: flex; align-items: center; height: 100%;">LUME</a>
  </div>

  <!-- Center - Navigation Links -->
  <ul class="nav-links d-none d-lg-flex align-items-center mb-0 list-unstyled gap-2" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); z-index: 2;">
    <li><a href="/" class="nav-link">Home</a></li>
    <li><a href="/shopAll" class="nav-link">Shop All</a></li>
    <li><a href="/featured" class="nav-link">Featured</a></li>
    <li><a href="/new-arrivals" class="nav-link">New Arrivals</a></li>
  </ul>

  <!-- Right side - Icons -->
  <ul class="icon-links d-flex align-items-center mb-0 list-unstyled gap-2">
    <li>
      <form action="/shopAll" method="GET" class="d-flex align-items-center search-form-desktop">
        <div class="search-container d-flex align-items-center">
          <input type="text" name="search" placeholder="Search products..." class="search-input form-control">
          <button type="submit" class="search-button ms-1"><i class="fas fa-search"></i></button>
        </div>
      </form>
    </li>
    <li><a href="/wishlist" class="icon-link"><i class="far fa-heart"></i></a></li>
    <li><a href="/cart" class="icon-link"><i class="fas fa-shopping-cart"></i></a></li>
    <li>
      <div class="profile-dropdown">
        <a href="/profile" class="icon-link" title="Profile">
          <i class="fas fa-user"></i>
        </a>
        <div class="profile-dropdown-content">
          <% if (locals.user) { %>
            <a href="/profile"><i class="fas fa-user"></i> My Profile</a>
            <a href="/orders"><i class="fas fa-box"></i> My Orders</a>
            <a href="/wishlist"><i class="fas fa-heart"></i> Wishlist</a>
            <a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
          <% } else { %>
            <a href="/login"><i class="fas fa-sign-in-alt"></i> Login</a>
            <a href="/signup"><i class="fas fa-user-plus"></i> Sign Up</a>
          <% } %>
        </div>
      </div>
    </li>
  </ul>
</nav>

<style>
.navbar {
  background: #fff;
  box-shadow: 0 2px 8px rgba(212,185,150,0.07);
  min-height: 70px;
  padding-top: 0.75rem !important;
  padding-bottom: 0.75rem !important;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100vw;
  z-index: 1050;
  margin: 0;
  padding-left: 0;
  padding-right: 0;
  box-sizing: border-box;
}
.brand-text {
  font-family: 'Aboreto', cursive;
  font-size: 1.35rem;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: #1a0f0a;
  font-weight: 400;
  text-decoration: none;
  line-height: 1.2;
  display: flex;
  align-items: center;
  height: 100%;
}
.nav-links, .icon-links {
  height: 100%;
  align-items: center !important;
}
.nav-links .nav-link {
  color: #1a0f0a;
  font-family: 'Jost', sans-serif;
  font-size: 0.95rem;
  padding: 0.45rem 0.9rem;
  font-weight: 400;
  text-decoration: none !important;
  box-shadow: none !important;
  border-radius: 4px;
  transition: background 0.2s, color 0.2s;
}
.nav-links .nav-link:hover, .nav-links .nav-link.active {
  background: #f8f5f2;
  color: #A9BA9D;
}
.icon-links .icon-link {
  color: #1a0f0a;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  width: 32px;
  padding: 0;
  margin: 0;
  text-decoration: none !important;
  box-shadow: none !important;
  border-radius: 50%;
  transition: background 0.2s, color 0.2s;
}
.icon-links .icon-link:hover {
  background: #f8f5f2;
  color: #A9BA9D;
}
.search-container {
  border-radius: 20px;
  border: 1px solid #e0d8cc;
  background: #fff;
  padding: 0.1rem 0.5rem 0.1rem 0.7rem;
  display: flex;
  align-items: center;
}
.search-input {
  border: none;
  outline: none;
  background: transparent;
  font-family: 'Jost', sans-serif;
  font-size: 0.95rem;
  color: #2c1810;
  width: 200px;
  padding: 0.2rem 0;
  height: 32px;
}
.search-input:focus {
  outline: none;
  box-shadow: none;
}
.search-button {
  background: none;
  border: none;
  color: #2c1810;
  cursor: pointer;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  width: 32px;
  padding: 0;
  margin-left: 0.2rem;
}
.search-button:focus {
  outline: none;
  box-shadow: none;
}
.profile-dropdown {
  position: relative;
  display: inline-block;
}
.profile-dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  background-color: white;
  min-width: 160px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  z-index: 1000;
  border-radius: 4px;
  padding: 0.5rem 0;
}
.profile-dropdown:hover .profile-dropdown-content {
  display: block;
}
.profile-dropdown-content a {
  color: #2c1810;
  padding: 0.75rem 1rem;
  text-decoration: none;
  display: block;
  font-size: 0.95rem;
  transition: background-color 0.3s;
}
.profile-dropdown-content a:hover {
  background-color: #f8f5f2;
  color: #A9BA9D;
}
.profile-dropdown-content a i {
  margin-right: 0.5rem;
  width: 20px;
  text-align: center;
}
@media (max-width: 991.98px) {
  .nav-links { display: none !important; }
  .search-form-desktop { display: none !important; }
  .profile-dropdown { display: none !important; }
}
@media (max-width: 575.98px) {
  html, body {
    width: 100vw !important;
    overflow-x: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  .navbar, nav.navbar {
    width: 100vw !important;
    left: 0 !important;
    right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin: 0 !important;
    border-radius: 0 !important;
    box-sizing: border-box !important;
  }
  .brand-text { font-size: 1rem; }
  .icon-link { font-size: 1rem; height: 28px; width: 28px; }
  .search-input { width: 140px; font-size: 0.8rem; height: 28px; }
  .profile-dropdown-content a { font-size: 0.8rem; }
}
</style>

<script>
// Sidebar toggle and mobile search logic
  document.addEventListener('DOMContentLoaded', function() {
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const searchToggle = document.getElementById('searchToggle');
    const searchContainer = document.getElementById('searchContainer');
    if (sidebarToggle && sidebar && overlay) {
      sidebarToggle.addEventListener('click', () => {
        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');
      });
      overlay.addEventListener('click', () => {
        sidebar.classList.remove('open');
        overlay.classList.remove('active');
      });
    }
    if (searchToggle && searchContainer) {
      searchToggle.addEventListener('click', (e) => {
        e.preventDefault();
        searchContainer.style.display = searchContainer.style.display === 'block' ? 'none' : 'block';
        if (searchContainer.style.display === 'block') {
          searchContainer.querySelector('input').focus();
        }
      });
      document.addEventListener('click', (e) => {
        if (!searchContainer.contains(e.target) && e.target !== searchToggle) {
          searchContainer.style.display = 'none';
        }
      });
    }
  });
</script>