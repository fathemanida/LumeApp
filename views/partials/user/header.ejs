<!-- Google Fonts for Aboreto and Jost -->
<link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Jost:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="icon" type="image/x-icon" href="/images/favicon.ico.png">

<nav class="navbar">
  <!-- Left side - Brand -->
  <div class="brand">
    <a href="/" class="brand-text">LUME</a>
  </div>

  <!-- Center - Navigation Links (visible on desktop and tablet) -->
  <div class="nav-links-container">
    <div class="nav-links">
      <a href="/" class="nav-link">Home</a>
      <a href="/shopAll" class="nav-link">Collections</a>
      <a href="/featured" class="nav-link">Featured</a>
      <a href="/new-arrivals" class="nav-link">New Arrivals</a>
    </div>
  </div>

  <!-- Right side - Icons -->
  <div class="nav-icons">
    <div class="icon-links">
      <a href="#" class="search-toggle" id="searchToggle">
        <i class="fas fa-search"></i>
      </a>
      <div class="search-container" id="searchContainer">
        <form action="/shopAll" method="get" style="display: flex; align-items: center;">
          <input type="text" name="search" placeholder="Search..." class="search-input">
          <button type="submit" class="search-button" style="background: none; border: none; margin-left: 0.5rem;">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>
      <a href="/wishlist" class="icon-link"><i class="far fa-heart"></i></a>
      <a href="/cart" class="icon-link"><i class="fas fa-shopping-cart"></i></a>
      <div class="icon-link profile-icon profile-dropdown" tabindex="0" id="profileDropdown">
        <i class="fas fa-user"></i>
        <div class="profile-dropdown-content">
          <% if (locals.user) { %>
            <a href="/profile"><i class="fas fa-user"></i> My Profile</a>
            <a href="/orders"><i class="fas fa-box"></i> My Orders</a>
            <a href="/wallet"><i class="fas fa-wallet"></i> Wallet</a>
            <a href="/cart"><i class="fas fa-shopping-cart"></i> Cart</a>
            <a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
          <% } else { %>
            <a href="/login"><i class="fas fa-sign-in-alt"></i> Login</a>
            <a href="/signup"><i class="fas fa-user-plus"></i> Sign Up</a>
          <% } %>
        </div>
      </div>
    </div>

    <!-- Mobile Toggle Button -->
    <button id="mobileToggle" class="mobile-toggle-btn">
      <span class="toggle-line"></span>
      <span class="toggle-line"></span>
      <span class="toggle-line"></span>
    </button>
  </div>

  <!-- Mobile Menu (Hidden by default) -->
  <div class="mobile-menu">
    <div class="mobile-links">
      <a href="/" class="mobile-link">Home</a>
      <a href="/shopAll" class="mobile-link">Collections</a>
      <a href="/featured" class="mobile-link">Featured</a>
      <a href="/new-arrivals" class="mobile-link">New Arrivals</a>
      <a href="/wishlist" class="mobile-link"> Wishlist</a>
      <a href="/cart" class="mobile-link"><i class="fas fa-shopping-cart"></i> Cart</a>
      <a href="/profile" class="mobile-link"><i class="fas fa-user"></i> Profile</a>
      <div class="mobile-search">
        <form action="/shopAll" method="get" style="display: flex; width: 100%;">
          <input type="text" name="search" placeholder="Search..." class="search-input" style="flex-grow: 1;">
          <button type="submit" class="search-button" style="background: none; border: none; margin-left: 0.5rem;">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>
    </div>
  </div>
</nav>

<style>
/* Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body, html {
  overflow-x: hidden;
}

.navbar, .mobile-menu {
  max-width: 100vw;
  box-sizing: border-box;
}

.navbar {
  background: #fff;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 1000;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

/* Prevent flex children from overflowing */
.nav-links, .icon-links {
  min-width: 0;
  flex-shrink: 1;
}

.brand-text {
  font-family: 'Aboreto', cursive;
  font-size: 1.5rem;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: #1a0f0a;
  font-weight: 400;
  text-decoration: none;
}

/* Navigation Links */
.nav-links-container {
  flex: 1;
  display: flex;
  justify-content: center;
}

.nav-links {
  display: flex;
  gap: 2rem;
}

.nav-link {
  font-family: 'Jost', sans-serif;
  font-size: 0.95rem;
  color: #1a0f0a;
  text-decoration: none;
  padding: 0.5rem 0;
  position: relative;
  transition: color 0.3s ease;
}

.nav-link:hover {
  color: #A9BA9D;
}

.nav-link::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 1px;
  background-color: #A9BA9D;
  transition: width 0.3s ease;
}

.nav-link:hover::after {
  width: 100%;
}

/* Icons */
.nav-icons {
  display: flex;
  align-items: center;
}

.icon-links {
  display: flex;
  align-items: center;
  gap: 1.5rem;
}

.icon-link, .search-toggle {
  color: #1a0f0a;
  font-size: 1.1rem;
  text-decoration: none;
  transition: color 0.3s ease;
}

.icon-link:hover, .search-toggle:hover {
  color: #A9BA9D;
}

/* Search */
.search-container {
  display: none;
  position: absolute;
  right: 0;
  top: 100%;
  background: white;
  padding: 1rem;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  border-radius: 4px;
}

.search-input {
  border: 1px solid #e0d8cc;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-family: 'Jost', sans-serif;
  width: 200px;
}

/* Profile Dropdown */
.profile-dropdown {
  position: relative;
  display: inline-block;
  cursor: pointer;
}

.dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  background-color: white;
  min-width: 160px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  z-index: 1;
  border-radius: 4px;
}

.dropdown-content a {
  color: #1a0f0a;
  padding: 0.75rem 1rem;
  text-decoration: none;
  display: block;
  font-family: 'Jost', sans-serif;
  font-size: 0.9rem;
}

.dropdown-content a:hover {
  background-color: #f8f8f8;
  color: #A9BA9D;
}

.profile-dropdown:hover .dropdown-content {
  display: block;
}

/* Profile dropdown on hover for profile icon */
.profile-dropdown {
  position: relative;
}
.profile-dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  top: 120%;
  background-color: white;
  min-width: 170px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  z-index: 1001;
  border-radius: 4px;
  padding: 0.5rem 0;
}
.profile-dropdown-content a {
  color: #1a0f0a;
  padding: 0.75rem 1rem;
  text-decoration: none;
  display: block;
  font-family: 'Jost', sans-serif;
  font-size: 0.95rem;
  transition: background 0.2s, color 0.2s;
}
.profile-dropdown-content a:hover {
  background-color: #f8f8f8;
  color: #A9BA9D;
}
.profile-dropdown:hover .profile-dropdown-content,
.profile-dropdown:focus-within .profile-dropdown-content {
  display: block;
}

/* Mobile Toggle Button */
.mobile-toggle-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  margin-left: 1rem;
  display: none;
  flex-direction: column;
  gap: 0.35rem;
}

.toggle-line {
  width: 25px;
  height: 1px;
  background-color: #1a0f0a;
  transition: all 0.3s ease;
}

/* Mobile Menu */
.mobile-menu {
  position: fixed;
  top: 70px;
  left: 0;
  right: 0;
  background: #fff;
  padding: 2rem;
  box-shadow: 0 5px 10px rgba(0,0,0,0.1);
  transform: translateY(-150%);
  transition: transform 0.3s ease;
  z-index: 999;
}

.mobile-menu.active {
  transform: translateY(0);
}

.mobile-links {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.mobile-link {
  font-family: 'Jost', sans-serif;
  font-size: 1rem;
  color: #1a0f0a;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.mobile-search {
  display: flex;
  margin-top: 1rem;
}

.mobile-search .search-input {
  flex-grow: 1;
}

.mobile-search .search-button {
  background: none;
  border: none;
  margin-left: 0.5rem;
}

/* Responsive Adjustments */
@media (max-width: 992px) {
  .nav-links {
    gap: 1.5rem;
  }
  
  .icon-links {
    gap: 1.2rem;
  }
}

@media (max-width: 768px) {
  .navbar {
    padding: 1rem 0.5rem;
  }
  
  .brand-text {
    font-size: 1.2rem;
  }
  
  .nav-links-container {
    display: none;
  }
  
  .mobile-toggle-btn {
    display: flex;
  }
  .mobile-menu {
    padding: 1rem;
  }
  .profile-dropdown-content {
    left: auto;
    right: 0;
    min-width: 150px;
    top: 120%;
  }
}

@media (max-width: 480px) {
  .brand-text {
    font-size: 1rem;
  }
  .navbar {
    padding: 0.5rem 0.2rem;
  }
  .mobile-menu {
    padding: 0.5rem;
  }
  .mobile-link {
    font-size: 0.9rem;
  }
  
  .icon-links {
    gap: 1rem;
  }
}

/* Hide wishlist and show profile icon next to toggle on mobile */
@media (max-width: 768px) {
  .icon-link[href="/wishlist"],
  .desktop-profile {
    display: none !important;
  }
  .mobile-profile-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .mobile-profile-icon {
    display: inline-flex;
    align-items: center;
    font-size: 1.3rem;
    margin-right: 0.2rem;
  }
}
@media (min-width: 769px) {
  .mobile-profile-toggle {
    display: none !important;
  }
}

/* Profile icon consistent size and spacing */
.icon-link.profile-icon {
  font-size: 1.1rem;
  margin-left: 1rem;
  margin-right: 0.2rem;
  display: inline-flex;
  align-items: center;
}
@media (max-width: 768px) {
  .icon-link.profile-icon {
    font-size: 1.1rem;
    margin-left: 1rem;
    margin-right: 0.2rem;
  }
  .desktop-profile {
    display: none !important;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Mobile menu toggle
  const mobileToggle = document.getElementById('mobileToggle');
  const mobileMenu = document.querySelector('.mobile-menu');
  const toggleLines = document.querySelectorAll('.toggle-line');
  
  mobileToggle.addEventListener('click', function() {
    mobileMenu.classList.toggle('active');
    
    // Animate toggle button
    if (mobileMenu.classList.contains('active')) {
      toggleLines[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
      toggleLines[1].style.opacity = '0';
      toggleLines[2].style.transform = 'rotate(-45deg) translate(5px, -5px)';
    } else {
      toggleLines.forEach(line => {
        line.style.transform = '';
        line.style.opacity = '';
      });
    }
  });

  // Search toggle
  const searchToggle = document.getElementById('searchToggle');
  const searchContainer = document.getElementById('searchContainer');
  
  searchToggle.addEventListener('click', function(e) {
    e.preventDefault();
    searchContainer.style.display = searchContainer.style.display === 'block' ? 'none' : 'block';
  });

  // Close search when clicking outside
  document.addEventListener('click', function(e) {
    if (!searchToggle.contains(e.target) && !searchContainer.contains(e.target)) {
      searchContainer.style.display = 'none';
    }
  });

  // Profile dropdown for mobile (toggle on click)
  const profileDropdown = document.getElementById('profileDropdown');
  if (profileDropdown) {
    profileDropdown.addEventListener('click', function(e) {
      if (window.innerWidth <= 768) {
        e.stopPropagation();
        const dropdown = this.querySelector('.profile-dropdown-content');
        dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
      }
    });
    document.addEventListener('click', function(e) {
      if (window.innerWidth <= 768 && !profileDropdown.contains(e.target)) {
        const dropdown = profileDropdown.querySelector('.profile-dropdown-content');
        if (dropdown) dropdown.style.display = 'none';
      }
    });
  }
});
</script>