<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LUME - Jewelry</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Jost&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --dark-brown: #291d0e;
      --olive-green: #314216;
      --light-bg: #f8f5f2;
      --border-color: #d3c9be;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background-color: var(--light-bg);
      font-family: 'Jost', sans-serif;
      color: var(--dark-brown);
    }

    /* Navbar */
    .navbar {
      background: white;
      border-bottom: 1px solid var(--border-color);
      position: relative;
      padding: 1rem 2rem;
    }

    .brand {
      font-family: 'Aboreto', cursive;
      font-size: 1.5rem;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--dark-brown);
      cursor: pointer;
    }

    .navbar .nav-link {
      color: var(--dark-brown);
      font-family: 'Jost', sans-serif;
      font-size: 0.9rem;
      transition: color 0.3s ease;
      padding: 0.5rem 1rem;
    }

    .navbar .nav-link:hover {
      color: var(--olive-green);
      font-weight: 500;
    }

    .navbar .icon-link {
      color: var(--dark-brown);
      transition: color 0.3s ease;
      font-size: 1.1rem;
      padding: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .navbar .icon-link:hover {
      color: var(--olive-green);
    }

    .navbar .d-flex {
      gap: 1rem;
    }

    .navbar .list-unstyled {
      margin: 0;
      padding: 0;
    }

    .navbar .list-unstyled li {
      display: flex;
      align-items: center;
    }

    /* Search Bar */
    .search-container {
      position: relative;
      display: flex;
      align-items: center;
    }

    .search-input {
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 0.5rem 1rem;
      padding-right: 2.5rem;
      font-family: 'Jost', sans-serif;
      width: 200px;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--dark-brown);
      width: 250px;
      box-shadow: 0 0 0 2px rgba(41, 29, 14, 0.1);
    }

    .search-button {
      position: absolute;
      right: 10px;
      background: none;
      border: none;
      color: var(--dark-brown);
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .search-button:hover {
      color: var(--olive-green);
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100%;
      background: white;
      z-index: 1000;
      transition: left 0.3s ease;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      overflow-y: auto;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .sidebar-menu {
      padding: 1rem;
    }

    .sidebar-category {
      margin-bottom: 1.5rem;
    }

    .sidebar-title {
      font-family: 'Aboreto', cursive;
      font-size: 1rem;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }

    .sidebar-items {
      padding-left: 1rem;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .sidebar-items.open {
      max-height: 500px;
    }

    .sidebar-item {
      padding: 0.5rem 0;
      cursor: pointer;
    }

    .sidebar-item:hover {
      color: var(--olive-green);
    }

    .sidebar-item a {
      color: var(--dark-brown);
      text-decoration: none;
      display: block;
      transition: color 0.3s ease;
    }

    .sidebar-item a:hover {
      color: var(--olive-green);
    }

    .sidebar-item a.active {
      color: var(--olive-green);
      font-weight: 500;
    }

    .sidebar-item a.active::before {
      content: "â€¢";
      margin-right: 5px;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 999;
      display: none;
    }

    .overlay.active {
      display: block;
    }

    /* Hero Section */
    .hero-section {
      display: flex;
      width: 100%;
      margin: 0;
      padding: 0;
    }

    .hero-img {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      width: 50%;
      height: 500px;
      object-fit: cover;
    }

    .hero-img:hover {
      transform: scale(1.02);
      box-shadow: 0 5px 15px rgba(41, 29, 14, 0.1);
    }

    /* Section Headings */
    .section-heading {
      font-family: 'Aboreto', cursive;
      color: var(--dark-brown);
      letter-spacing: 1.5px;
      text-transform: uppercase;
      font-weight: 400;
    }

    .section-subtext {
      font-family: 'Jost', sans-serif;
      color: var(--dark-brown);
      font-size: 0.9rem;
    }

    /* Featured and Product Categories */
    .product-card {
      background: white;
      border-radius: 4px;
      box-shadow: 0 2px 10px rgba(41, 29, 14, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 20px rgba(41, 29, 14, 0.1);
    }

    .product-img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
    }

    .product-title {
      font-family: 'Jost', sans-serif;
      font-size: 0.9rem;
      color: var(--dark-brown);
      margin-top: 0.5rem;
    }

    .product-price {
      font-weight: 500;
      margin-bottom: 1rem;
    }

    .new-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: var(--olive-green);
      color: white;
      font-family: 'Jost', sans-serif;
      font-size: 0.7rem;
      padding: 0.25rem 0.5rem;
      border-radius: 2px;
      text-transform: uppercase;
    }

    /* Wishlist Icon */
    .wishlist-icon {
      position: absolute;
      top: 10px;
      left: 10px;
      color: rgb(0, 0, 0);
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      
    }

    .wishlist-icon:hover {
      color: #ff6b6b;
      transform: scale(1.1);
    }

    /* SELECT YOUR SPARKLE Banner */
    .sparkle-banner {
      background-color: var(--dark-brown);
      color: white;
      font-family: 'Aboreto', cursive;
      letter-spacing: 2px;
      text-transform: uppercase;
      transition: background-color 0.3s ease;
    }

    .sparkle-banner:hover {
      background-color: var(--olive-green);
    }

    /* Signup CTA */
    .signup-input {
      border: 1px solid var(--border-color);
      border-radius: 4px;
      padding: 0.5rem 1rem;
      font-family: 'Jost', sans-serif;
      transition: border-color 0.3s ease;
    }

    .signup-input:focus {
      outline: none;
      border-color: var(--dark-brown);
    }

    .signup-btn {
      background-color: var(--dark-brown);
      color: white;
      font-family: 'Jost', sans-serif;
      font-weight: 500;
      border-radius: 4px;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .signup-btn:hover {
      background-color: var(--olive-green);
      transform: translateY(-2px);
    }

    /* Footer */
    .footer {
      background-color: var(--dark-brown);
    }

    .footer-heading {
      font-family: 'Aboreto', cursive;
      color: white;
      font-size: 1rem;
      letter-spacing: 1px;
    }

    .footer-link {
      color: white;
      font-family: 'Jost', sans-serif;
      font-size: 0.9rem;
      transition: color 0.3s ease;
    }

    .footer-link:hover {
      color: var(--light-bg);
    }

    /* Profile Dropdown */
    .profile-dropdown {
      position: relative;
      display: inline-block;
    }

    .profile-dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: white;
      min-width: 160px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      z-index: 1000;
      border-radius: 4px;
      padding: 0.5rem 0;
    }

    .profile-dropdown:hover .profile-dropdown-content {
      display: block;
    }

    .profile-dropdown-content a {
      color: var(--dark-brown);
      padding: 0.75rem 1rem;
      text-decoration: none;
      display: block;
      font-size: 0.9rem;
      transition: background-color 0.3s ease;
    }

    .profile-dropdown-content a:hover {
      background-color: var(--light-bg);
      color: var(--olive-green);
    }

    .profile-dropdown-content a i {
      margin-right: 0.5rem;
      width: 20px;
      text-align: center;
    }
    
        .pagination {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            margin-top: 1.5rem;
            align-items: center;
        }

        .page-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            border: none;
            background-color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--dark-brown);
            text-decoration: none;
        }

        .page-btn:hover:not(.active):not(:disabled) {
            background-color: var(--olive-green);
            color: white;
        }

        .page-btn.active {
            background-color: var(--dark-brown);
            color: white;
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
         .page-btn:hover:not(.active) {
      background-color: #d0d0d0;
    }

    .product-info {
        padding: 1rem;
    }

    .product-category {
        color: var(--olive-green);
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }
    /* Add this to your existing CSS */
.main-content-container {
    padding-left: 5.5rem;
    padding-right: 5.5rem;
}

/* For larger screens */
@media (min-width: 768px) {
  .main-content-container {
    padding-left: 4rem;
    padding-right: 4rem;
  }
}

@media (min-width: 1200px) {
  .main-content-container {
    padding-left: 6rem;
    padding-right: 6rem;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
  }
}
.search-container {
  position: relative;
  display: flex;
  align-items: center;
}

.search-input {
  border: 1px solid var(--border-color);
  border-radius: 20px;
  padding: 0.5rem 1rem;
  padding-right: 2.5rem;
  font-family: 'Jost', sans-serif;
  width: 200px;
  transition: all 0.3s ease;
}

.search-input:focus {
  outline: none;
  border-color: var(--dark-brown);
  width: 250px;
  box-shadow: 0 0 0 2px rgba(41, 29, 14, 0.1);
}

.search-button {
  position: absolute;
  right: 10px;
  background: none;
  border: none;
  color: var(--dark-brown);
  cursor: pointer;
}

.search-button:hover {
  color: var(--olive-green);
}/* Search Bar Styles */
.search-container {
  position: relative;
  display: flex;
  align-items: center;
}

.search-input {
  border: 1px solid var(--border-color);
  border-radius: 20px;
  padding: 0.5rem 1rem;
  padding-right: 2.5rem;
  font-family: 'Jost', sans-serif;
  width: 200px;
  transition: all 0.3s ease;
}

.search-input:focus {
  outline: none;
  border-color: var(--dark-brown);
  width: 250px;
  box-shadow: 0 0 0 2px rgba(41, 29, 14, 0.1);
}

.search-button {
  position: absolute;
  right: 10px;
  background: none;
  border: none;
  color: var(--dark-brown);
  cursor: pointer;
}

.search-button:hover {
  color: var(--olive-green);
}
  </style>
</head>
<body>

  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="brand">LUME</div>
    </div>
    <div class="sidebar-menu">
      <!-- Add search bar -->
      <div class="sidebar-category mb-4">
        <form id="sidebarSearchForm" onsubmit="return false;">
          <div class="input-group">
            <input type="text" class="form-control search-input" placeholder="Search products..." id="sidebarSearch" name="search">
            <button class="btn btn-outline-dark" type="submit" id="sidebarSearchBtn">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </form>
      </div>
      <div class="sidebar-category">
        <div class="sidebar-title" onclick="toggleCategory(this)">
          Categories <i class="fas fa-chevron-down"></i>
        </div>
        <div class="sidebar-items">
        <%for(let i=0;i<category.length;i++){%>
          <div class="sidebar-item">
            <a href="/filter?category=<%=category[i]._id%><%= selectedSort ? '&sort=' + selectedSort : '' %>" 
               class="<%= selectedCategory === category[i]._id.toString() ? 'active' : '' %>">
              <%=category[i].name%>
            </a>
          </div>
         <% } %>
        </div>
      </div>
      
      <div class="sidebar-category">
        <div class="sidebar-title" onclick="toggleCategory(this)">
          Sort By <i class="fas fa-chevron-down"></i>
        </div>
        <div class="sidebar-items">
          <div class="sidebar-item">
            <a href="?sort=price-low<%= selectedCategory ? '&category=' + selectedCategory : '' %>" 
               class="<%= selectedSort === 'price-low' ? 'active' : '' %>">
              Price: Low to High
            </a>
          </div>
          <div class="sidebar-item">
            <a href="?sort=price-high<%= selectedCategory ? '&category=' + selectedCategory : '' %>"
               class="<%= selectedSort === 'price-high' ? 'active' : '' %>">
              Price: High to Low
            </a>
          </div>
          <div class="sidebar-item">
            <a href="?sort=name-asc<%= selectedCategory ? '&category=' + selectedCategory : '' %>"
               class="<%= selectedSort === 'name-asc' ? 'active' : '' %>">
              A-Z
            </a>
          </div>
          <div class="sidebar-item">
            <a href="?sort=name-desc<%= selectedCategory ? '&category=' + selectedCategory : '' %>"
               class="<%= selectedSort === 'name-desc' ? 'active' : '' %>">
              Z-A
            </a>
          </div>
          <div class="sidebar-item">
            <a href="?sort=newest<%= selectedCategory ? '&category=' + selectedCategory : '' %>"
               class="<%= selectedSort === 'newest' ? 'active' : '' %>">
              Newest First
            </a>
          </div>
        </div>
      </div>
      
      <div class="sidebar-category">
        <div class="sidebar-title" onclick="toggleCategory(this)">
          Collections <i class="fas fa-chevron-down"></i>
        </div>
        <div class="sidebar-items">
          <div class="sidebar-item">New Arrivals</div>
          <div class="sidebar-item">Best Sellers</div>
          <div class="sidebar-item">Limited Edition</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="navbar d-flex justify-content-between align-items-center px-4 py-3">
  
  <div class="brand" id="sidebarToggle">LUME</div>

  
  <ul class="d-flex align-items-center list-unstyled mb-0" style="position: absolute; left: 50%; transform: translateX(-50%);">
    <li class="mx-2"><a href="/" class="nav-link">Home</a></li>
    <li class="mx-2"><a href="/shopAll" class="nav-link">Shop All</a></li>
    <li class="mx-2"><a href="/featured" class="nav-link">Featured</a></li>
    <li class="mx-2"><a href="/new-arrivals" class="nav-link">New Arrivals</a></li>
  </ul>

 
  <ul class="d-flex align-items-center list-unstyled mb-0">
   
    <li class="mx-2">
      <form action="/shopAll" method="GET" class="d-flex align-items-center">
        <div class="search-container" id="searchContainer">
          <input type="text" 
                 name="search" 
                 placeholder="Search products..." 
                 class="search-input form-control" 
                 id="headerSearch">
          <button type="submit" class="search-button">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </form>
    </li>
    <li class="mx-2"><a href="#" class="icon-link" id="searchToggle"><i class="fas fa-search"></i></a></li>
    
    <% const currentUser = locals.user || (locals.session && locals.session.user); %>
   
    <li class="mx-2"><a href="/wishlist" class="icon-link"><i class="fas fa-heart"></i></a></li>
    <li class="mx-2"><a href="/cart" class="icon-link"><i class="fas fa-shopping-cart"></i></a></li>
    
    
    <li class="mx-2">
      <div class="profile-dropdown">
      <a href="#" class="icon-link"><i class="far fa-user"></i></a>
        <div class="profile-dropdown-content">
        <% if (currentUser) { %>
            <a href="/userProfile"><i class="fas fa-user"></i> My Profile</a>
            <a href="/orders"><i class="fas fa-box"></i> My Orders</a>
            <a href="/wishlist"><i class="fas fa-heart"></i> Wishlist</a>
            <a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
        <% } else { %>
            <a href="/login"><i class="fas fa-sign-in-alt"></i> Login</a>
            <a href="/signup"><i class="fas fa-user-plus"></i> Sign Up</a>
        <% } %>
        </div>
      </div>
    </li>
  </ul>
</nav>
  <!-- Main Content -->
  <div class="container-fluid py-4">
    <div class="row">
      <!-- Sidebar Filters -->
      <div class="col-12">
        <!-- Products Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h4 class="mb-0">All Products</h4>
          <div class="d-flex align-items-center">
            <span class="me-3">Showing <%= products.length %> of <%= totalProducts %> products</span>
          </div>
        </div>

        <!-- Products Grid -->
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4" id="productsGrid">
          <% if (products && products.length > 0) { %>
            <% products.forEach(product => { %>
      <div class="col product-item" 
           data-name="<%= product.productName.toLowerCase() %>"
           data-category="<%= product.category ? product.category.name.toLowerCase() : '' %>">
        <div class="product-card card text-center h-100">
          <a href="/product-details?id=<%= product._id %>" class="text-decoration-none">
            <i class="far fa-heart wishlist-icon" onclick="toggleWishlist(this)"></i>
            <% if (product.new) { %>
              <span class="new-badge">New</span>
            <% } %>
            <img 
              src="/uploads/product/<%= product.productImage[0] %>" 
              alt="<%= product.productName %>" 
              class="product-img card-img-top bg-secondary"
            >
            <div class="product-info">
              <p class="product-title card-title"><%= product.productName %></p>
              <% if (product.category && product.category.name) { %>
                <p class="product-category"><%= product.category.name %></p>
              <% } %>
              <p class="product-price">
                <% if (product.salePrice) { %>
                  <strike class="text-muted">$<%= (product.regularPrice || 0).toLocaleString('en-IN') %></strike>
                  <span class="text-danger ms-2">$<%= product.salePrice.toLocaleString('en-IN') %></span>
                <% } else { %>
                  $<%= (product.regularPrice || 0).toLocaleString('en-IN') %>
                <% } %>
              </p>
              <button class="btn btn-outline-dark w-100">Add to Cart</button>
            </div>
          </a>
        </div>
      </div>
    <% }) %>
          <% } else { %>
            <div class="col-12 text-center">
              <p class="text-muted">No products available</p>
            </div>
          <% } %>
        </div>

        <!-- Pagination -->
        <div class="pagination mt-4">
          <span style="margin-right: 1rem; align-self: center;">
            Page <%= currentPage %> of <%= totalPages %>
          </span>

          <% if (currentPage > 1) { %>
            <a href="?page=<%= currentPage - 1 %>" class="page-btn">&lt;</a>
          <% } else { %>
            <span class="page-btn" style="opacity: 0.5; pointer-events: none;">&lt;</span>
          <% } %>

          <% for (let i = 1; i <= totalPages; i++) { %>
            <% if (i === currentPage) { %>
              <span class="page-btn active"><%= i %></span>
            <% } else { %>
              <a href="?page=<%= i %>" class="page-btn"><%= i %></a>
            <% } %>
          <% } %>

          <% if (currentPage < totalPages) { %>
            <a href="?page=<%= currentPage + 1 %>" class="page-btn">&gt;</a>
          <% } else { %>
            <span class="page-btn" style="opacity: 0.5; pointer-events: none;">&gt;</span>
          <% } %>
        </div>
      </div>
    </div>
  </div>

   <footer class="footer py-5 mt-5" style="background-color: var(--dark-brown);">
    <div class="container">
      <div class="row row-cols-1 row-cols-sm-3 g-4">
    <div class="col">
          <h4 class="footer-heading mb-3">Company</h4>
      <ul class="list-unstyled">
            <li class="mb-2"><a href="#" class="footer-link">About Us</a></li>
            <li class="mb-2"><a href="#" class="footer-link">Careers</a></li>
            <li class="mb-2"><a href="#" class="footer-link">Contact</a></li>
            <li class="mb-2"><a href="#" class="footer-link">Privacy Policy</a></li>
      </ul>
    </div>
    <div class="col">
          <h4 class="footer-heading mb-3">Shop</h4>
      <ul class="list-unstyled">
            <li class="mb-2"><a href="#" class="footer-link">Rings</a></li>
            <li class="mb-2"><a href="#" class="footer-link">Necklaces</a></li>
            <li class="mb-2"><a href="#" class="footer-link">Earrings</a></li>
            <li class="mb-2"><a href="#" class="footer-link">Bracelets</a></li>
      </ul>
    </div>
        <div class="col">
          <h4 class="footer-heading mb-3">Connect With Us</h4>
      <ul class="list-unstyled">
            <li class="mb-2">
              <a href="#" class="footer-link d-flex align-items-center">
                <i class="fab fa-instagram me-2"></i> Instagram
              </a>
            </li>
            <li class="mb-2">
              <a href="#" class="footer-link d-flex align-items-center">
                <i class="fab fa-facebook me-2"></i> Facebook
              </a>
            </li>
            <li class="mb-2">
              <a href="#" class="footer-link d-flex align-items-center">
                <i class="fab fa-pinterest me-2"></i> Pinterest
              </a>
            </li>
            <li class="mb-2">
              <a href="#" class="footer-link d-flex align-items-center">
                <i class="fab fa-twitter me-2"></i> Twitter
              </a>
            </li>
      </ul>
        </div>
      </div>
      <div class="row mt-4 pt-4 border-top border-secondary">
        <div class="col-12 text-center">
          <p class="text-light mb-0">&copy; 2024 LUME Jewelry. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS and dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <!-- Add hidden input for blocked status -->
  <input type="hidden" id="userBlockedStatus" value="<%= locals.user && locals.user.isBlocked ? 'true' : 'false' %>">

  <script>
    // Check if user is blocked
    const isBlocked = document.getElementById('userBlockedStatus').value === 'true';
    if (isBlocked) {
      Swal.fire({
        title: 'Account Blocked',
        text: 'Your account has been blocked by the administrator. Please contact support for assistance.',
        icon: 'error',
        confirmButtonColor: '#291d0e',
        allowOutsideClick: false,
        allowEscapeKey: false,
        allowEnterKey: false,
        showCloseButton: false,
        showCancelButton: false,
        showDenyButton: false,
        showConfirmButton: true,
        confirmButtonText: 'Ok'
      }).then(() => {
        window.location.href = '/logout';
      });
    }

    // Sidebar functionality
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const searchToggle = document.getElementById('searchToggle');
    const searchContainer = document.getElementById('searchContainer');

    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      overlay.classList.toggle('active');
    });

    overlay.addEventListener('click', () => {
      sidebar.classList.remove('open');
      overlay.classList.remove('active');
    });

    // Search toggle functionality
    searchToggle.addEventListener('click', (e) => {
      e.preventDefault();
      searchContainer.classList.toggle('active');
      if (searchContainer.classList.contains('active')) {
        searchContainer.querySelector('input').focus();
      }
    });

    // Close search when clicking outside
    document.addEventListener('click', (e) => {
      if (!searchContainer.contains(e.target) && e.target !== searchToggle) {
        searchContainer.classList.remove('active');
      }
    });

    // Category toggle functionality
    function toggleCategory(element) {
      const items = element.nextElementSibling;
      const icon = element.querySelector('i');
      
      items.classList.toggle('open');
      
      if (items.classList.contains('open')) {
        icon.classList.remove('fa-chevron-down');
        icon.classList.add('fa-chevron-up');
      } else {
        icon.classList.remove('fa-chevron-up');
        icon.classList.add('fa-chevron-down');
      }
    }

    // Make sidebar items clickable
    document.querySelectorAll('.sidebar-item').forEach(item => {
      item.addEventListener('click', function() {
        console.log('Navigating to:', this.textContent);
        sidebar.classList.remove('open');
        overlay.classList.remove('active');
      });
    });

    // Wishlist functionality
    function toggleWishlist(icon) {
      icon.classList.toggle('far');
      icon.classList.toggle('fas');
      icon.classList.toggle('text-danger');
    }

    // Search functionality
    document.addEventListener('DOMContentLoaded', function() {
      const sidebarSearch = document.getElementById('sidebarSearch');
      const productItems = document.querySelectorAll('.product-item');
      
      function performSearch() {
        const searchTerm = sidebarSearch.value.trim().toLowerCase();
        
        productItems.forEach(item => {
          const productName = item.dataset.name;
          const productCategory = item.dataset.category;
          
          if (searchTerm === '' || 
              productName.includes(searchTerm) || 
              productCategory.includes(searchTerm)) {
            item.style.display = '';
          } else {
            item.style.display = 'none';
          }
        });

        // Update product count
        const visibleProducts = document.querySelectorAll('.product-item[style=""]').length;
        const totalProducts = productItems.length;
        const countElement = document.querySelector('.d-flex.align-items-center span');
        if (countElement) {
          countElement.textContent = `Showing ${visibleProducts} of ${totalProducts} products`;
        }
      }

      // Search on input
      sidebarSearch.addEventListener('input', performSearch);

      // Search on form submit
      document.getElementById('sidebarSearchForm').addEventListener('submit', function(e) {
        e.preventDefault();
        performSearch();
      });

      // Search on button click
      document.getElementById('sidebarSearchBtn').addEventListener('click', function(e) {
        e.preventDefault();
        performSearch();
      });
    });
  </script>
</body>
</html>